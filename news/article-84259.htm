<!DOCTYPE html>
<html xml:lang="zh-CN" lang="zh-CN">

<head>
        <link rel="canonical" href="https://freesingbox.github.io/news/article-84259.htm" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DDT数据驱动性能测试(一)</title>
        <meta name="description" content="一、csv数据文件设置 1、使用场景：测试过程中需要使用手机号码等大量数据时，用random函数随机生成数字；也可以使用Excel拖动生成一批手机号，也有可以从数据库中导出一批手机号，把准备好的数据，" />
        <link rel="icon" href="/assets/website/img/freesingbox/favicon.ico" type="image/x-icon"/>

    <meta name="author" content="Free Singbox节点订阅官网">
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://freesingbox.github.io/news/article-84259.htm" />
    <meta property="og:site_name" content="Free Singbox节点订阅官网" />
    <meta property="og:title" content="DDT数据驱动性能测试(一)" />
    <meta property="og:image" content="https://freesingbox.github.io/uploads/20240823/6efb0c7887a5916c89b50c5571bb7c49.webp" />
        <meta property="og:release_date" content="2025-03-29T09:03:36" />
    <meta property="og:updated_time" content="2025-03-29T09:03:36" />
        <meta property="og:description" content="一、csv数据文件设置 1、使用场景：测试过程中需要使用手机号码等大量数据时，用random函数随机生成数字；也可以使用Excel拖动生成一批手机号，也有可以从数据库中导出一批手机号，把准备好的数据，" />
        
    <meta name="applicable-device" content="pc,mobile" />
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta name="robots" content="max-image-preview:large" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="DDT数据驱动性能测试(一)">
    <meta name="format-detection" content="telephone=no">

    <link rel="dns-prefetch" href="https:/www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://www.googleadservices.com">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">
    <link rel="dns-prefetch" href="https://cm.g.doubleclick.net">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">

    <!-- Bootstrap -->
    <link href="/assets/website/css/freesingbox/bootstrap.min.css" rel="stylesheet">
    <!-- Style CSS -->
    <link href="/assets/website/css/freesingbox/style.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
    <!-- FontAwesome CSS -->
    <link rel="stylesheet" type="text/css" href="/assets/website/css/freesingbox/fontello.css">
    <link href="/assets/website/css/freesingbox/font-awesome.min.css" rel="stylesheet">
    <link href="/assets/website/css/freesingbox/owl.carousel.min.css" rel="stylesheet">
    <link href="/assets/website/css/freesingbox/owl.theme.default.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VLC2BS6BYS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VLC2BS6BYS');
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3332997411212854"
     crossorigin="anonymous"></script>
</head>

<body data-page="detail">
        <div class="header-wrapper">
        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <div class="logo">
                        <a href="/">
                                                <span>Free Singbox</span>
                                                </a>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="navigation-wrapper">
                        <div id="navigation">
                            <ul>
                                                                <li><a href="/" title="首页">首页</a> </li>
                                                                <li><a href="/free-nodes/" title="免费节点">免费节点</a> </li>
                                                                <li><a href="/paid-subscribe/" title="推荐机场">推荐机场</a> </li>
                                                                <li><a href="/client.htm" title="客户端">客户端</a> </li>
                                                                <li><a href="/news/" title="新闻资讯">新闻资讯</a> </li>
                                                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- header-close -->
    <!-- page-header-start -->
    <div class="page-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="page-section">
                        <h1 class="page-title">DDT数据驱动性能测试(一)</h1>
                        <p class="page-text">
                            <a href="/">首页</a> / <a href="/news/">新闻资讯</a> / 正文
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- cources-start-->
    <div class="space-medium">
        <div class="container">
            <div class="row">
                <div class="col-md-9">
                                    <input type="hidden" id="share-website-info" data-name="SingBoxNode官网订阅站" data-url="https://singboxnode.github.io">
                  				  				  				</h1> <h2>一、csv数据文件设置</h2> <p>1、使用场景：测试过程中需要使用手机号码等大量数据时，用random函数随机生成数字；也可以使用Excel拖动生成一批手机号，也有可以从数据库中导出一批手机号，把准备好的数据，放到txt文件，或者csv文件中，使用csv数据文件设置直接调用。</p> <p>2、txt文件、csv文件：都是文本文件，只是csv文件是用逗号分割列的文本文件</p> <p>3、使用csv数据文件设置，建议使用 txt文件，有两点原因</p> <p>　　3.1&nbsp;csv文件被打开时，占用的系统资源要多于txt，从性能测试角度分析，要尽可能使用不会影响到性能得文件</p> <p>　　3.2&nbsp;csv文件默认使用Excel来编辑，Excel的默认保存文件编码不是utf8，那么，在文件中有中文的时候，可能就会出现中文乱码</p> <p>4、<strong>文件名：</strong>在线程组中添加csv数据文件设置后，必须导入文件，因为文件名为空，jmeter工具就会报错，整个脚本就不能运行</p> <p>　　4.1 相对路径：相对的起始点</p> <p>　　　　4.1.1&nbsp;jmeter的bin文件夹 ----这个是jmeter的脚本默认的保存路径</p> <p>　　　　4.1.2 jmx脚本保存的路径</p> <p>　　4.2 csv文件放置位置：放在jmx路径相同的位置，相对路径使用'.\'反斜杠</p> <p>　　　　4.2.1&nbsp;这个.\ 可以在linux系统中被使用------也就是说，这个路径可以跨平台(兼容window、 mac、linux)</p> <p>　　　　4.2.2&nbsp;做性能测试时，我们的jmx脚本可能要放到linux 系统中来运行，所以，我们建议这个相对路径的 斜杠 用 '.\'</p> <p>　　4.3&nbsp;在使用CLI命令进行性能测试时，建议把csv的文件放在 jmeter命令执行的位置</p> <p>5、<strong>变量名称：</strong>定义的变量名称，会接收对应列的值，启动运行，就会从第一行开始取值，默认： 如果你启动运行之后，会循环运行多次，那么，就会自动的从第一行开始往下取值，如果总的运行次数，超过我们文件行数量，就会从第一行开始，再从上往下取值。 多个变量名称之间，用固定逗号来分割</p> <p>6、<strong>忽略首行：</strong>选择 false不忽略首行； true忽略首行，从第二行开始</p> <p>7、<strong>分隔符：</strong>&nbsp;默认为“,”这个是csv的默认分割符合 这个可以根据你自己的文件中的分割符来改变。</p> <p>8、<strong>遇到文件结束符再次循环？（T1）：默认为TRUE</strong></p> <p><strong></strong>8.1 文件结束符:文件的最后一行的结束标记</p> <p>　　8.2 true:是的，我会继续循环，从头开始循环，文件第一行；false：停止循环</p> <p><strong>9、遇到文件结束符停止线程？（T2）：默认false</strong></p> <p><strong></strong>9.1&nbsp;停止循环：停止做某件事情，不再从文件开头进行循环</p> <p>　　9.2&nbsp;false 不，我不会停止脚本的运行；true 是的，我会停止脚本的运行</p> <p><strong>10、T1+T2</strong></p> <p>　　10.1&nbsp;T1 true + T2 false == 不会停止运行，继续运行，又从头开始取值。</p> <p>　　10.2<span style="color: rgba(255, 0, 0, 1)">&nbsp;T1 true + T2 true === 发生冲突，导致T2无效，会继续运行，从头开始循环</span></p> <p><span style="color: rgba(255, 0, 0, 1)"><span style="color: rgba(0, 0, 0, 1)">10.3&nbsp;T1 false + T2 true ===我会停止运行，T1也没用了</span></span></p> <p><span style="color: rgba(255, 0, 0, 1)"><span style="color: rgba(0, 0, 0, 1)">　　10.4&nbsp;T1 false + T2 false ===不会停止运行，<span style="color: rgba(255, 0, 0, 1)">T1就一直在最后一个空值 上循环</span></span></span></p> <p><strong><span style="color: rgba(0, 0, 0, 1)">11、线程共享模式</span></strong></p> <p><strong><span style="color: rgba(0, 0, 0, 1)"></span></strong><span style="color: rgba(0, 0, 0, 1)">11.1</span><span style="color: rgba(0, 0, 0, 1)">所有线程： 所有的并发用户都共享一个csv文件，所有线程取这个文件中的值的时候，循环取值</span></p> <p><span style="color: rgba(0, 0, 0, 1)">　　11.2&nbsp;当前线程组： 只在这个线程组内共享文件数据</span></p> <p><span style="color: rgba(0, 0, 0, 1)">　　11.3&nbsp;当前线程： 线程组中每个线程都有一个独立csv文件</span></p> <p><span style="color: rgba(0, 0, 0, 1)">　　11.4&nbsp;后置处理器、csv数据文件设置等等一些元件中定义的变量，都是 jmeter 的参数变量，不能直接跨线程组。</span></p> <h2><span style="color: rgba(0, 0, 0, 1)">二、逻辑控制器</span></h2> <p><span style="color: rgba(0, 0, 0, 1)">1、逻辑控制器是用来控制脚本执行的逻辑顺序，控制的主体为取样器</span></p> <p><strong><span style="color: rgba(0, 0, 0, 1)">2、if条件控制：if条件满足才会去执行下面的取样器</span></strong></p> <p><span style="color: rgba(0, 0, 0, 1)"><strong></strong>2.1&nbsp;默认请求下，必须使用jexl3 或 groovy这个函数，把表达式的结果计算出来，为真，才执行逻辑控制器下的取样器，如果为假，则不执行，输入框填写计算式：${__groovy(${jcode} == 0,)}</span></p> <p><span style="color: rgba(0, 0, 0, 1)">　　2.2&nbsp;去掉 Interpret condition as variable expression的复选框，输入框填写表达式{jcode} == 0</span></p> <p><strong><span style="color: rgba(0, 0, 0, 1)">3、foreach控制器：对一个明确列表数据来进行循环</span></strong></p> <p><span style="color: rgba(0, 0, 0, 1)"><strong></strong>3.1 使用场景一：后置处理器提取出多个值的时候，多个值，就会自动带上_数字</span></p> <p><span style="color: rgba(0, 0, 0, 1)">　　3.2 使用场景二：用一个变量来接收，从数据库中返回数据，当这个变量的值有 多个时，这个变量名称后面也会跟上_数字，你要用这些值。</span></p> <p><strong>4、循环控制器：控制取样器执行次数</strong></p> <p><span><strong>5、仅一次控制器：启动运行之后，每个线程只会运行一次</strong></span></p> <p><span><strong>6、事务控制器</strong></span></p> <p><span><strong></strong>6.1&nbsp;jmeter中，默认，一个取样器执行一次请求，就是一个事务</span></p> <p><span>　　6.2&nbsp;jmeter中，也可以通过事务控制器，把多个接口合并在一起，发起 一次完整的请求，当做一个事务。</span></p> <p><span>　　6.3&nbsp;用jmeter做接口的性能测试， 先对单接口进行性能测试，然后，再 试多接口构成业务进行性能测试, 再多业务一起性能测试，系统的性能测试。</span></p> <p><span>　　　　6.3.1 全链路：发起请求的数据流的各个环节都需要测试。</span></p> <p><span>　　　　　　6.3.1.1 常规理解：使用jmeter先对1个接口进行测试，再扩展到2-3个，最后慢慢的把整个产品中， 非常多个多的接口，都进行性能测试，对于中小微企业，或者完全还没有性能测试部门的公司，这就是全链路测试<br /></span></p> <p><span>　　　　　　6.4.1.2 真正意义上的全链路：多个接口都需要做性能测试；对应服务器的各个环境，都需要进行监控；流量回放；压测工具 ；全链路监控；全链路性能分析</span></p> <h2><span>三、其他协议脚本编写</span></h2> <p><strong>1、soap协议 =&nbsp;= http协议 + xml数据</strong></p> <p><strong></strong>　1.1&nbsp;用jmeter写soap协议脚本， 使用http取样器 + xml，数据放在消息体数据中</p> <p>　　1.2&nbsp;soap协议接口版本 1.1版本与1.2版本的区别</p> <p>　　　　1.2.1&nbsp;消息头： 1.1中 SOAPAction， Content-Type不一样</p> <p>　　　　1.2.2&nbsp;请求体中，节点的标签名不一样</p> <p><strong>2、jdbc协议：java语言连接数据库执行sql的api接口协议</strong></p> <p><strong></strong>2.1 jmeter调用jdbc协议：&nbsp;需要数据库的驱动</p> <p>　　　　2.1.1 了解数据库的类型dbms： mysql、oracle、 postgresql、sqlite</p> <p>　　　　2.1.2 获取java语言调用数据库的驱动包：通过maven仓库</p> <p>　　　　　　2.1.2.1&nbsp;http://mvnrepository.com/ 搜索mysql</p> <p>　　　　　　2.1.2.2<span style="color: rgba(255, 0, 0, 1)">确认自己的mysql的版本：如果自己的mysql版本为5.7.x的版本，你的驱动包，可以选择大于等于数据库版本的包；如果你的mysql是8.x的版本， 你选择的驱动包， 就要与你的数据库版本一致</span></p> <p>　　　　2.1.3&nbsp;把下载的驱动包，放到jmeter的lib\ext文件夹中，然后，重启 jmeter</p> <p>　　　　2.1.4&nbsp;jmeter连接mysql数据库</p> <p>　　　　　　2.1.4.1&nbsp;数据库的ip、port、账号、密码</p> <p>　　　　　　2.1.4.2&nbsp;在jmeter中，添加数据库配置信息：JDBC Connection Configuration</p> <p>　　　　　　　　　　Variable Name for created pool： 自定义</p> <p>　　　　　　　　　　DatabaseURL(mysql写法):jdbc:mysql://msyql_ip:port/dbname</p> <p><span style="color: rgba(255, 0, 0, 1)">JDBC Driver class:当你的数据库版本为5.7.x版本，可以直接 选择 com.mysql.jdbc.Drvier；数据库版本为8.x版本： com.mysql.cj.jdbc.Driver</span></p> <p>　　　　　　　　　　用户名，密码</p> <p>　　　　2.1.5&nbsp;执行sql脚本 -----取样器</p> <p>　　　　　　2.1.5.1&nbsp;jdbc request</p> <p>　　　　　　　　　　pool： 填写Configuration中自定义 pool名称</p> <p>　　　　　　　　　　SQL Query： 写脚本</p> <p>　　　　　　　　　　　　query type： select statement</p> <p>　　　　2.1.6&nbsp;SQL Query:在执行查询语句时不建议查全表，因为jmeter图像界面工具，默认只能支持10m的响应；查看结果树中，默认只会显示最新的500响应，超过了会导致 jmeter卡死，后面程序有部分数据会看不到；在jmeter.properties配置文件中可以修改但是不建议改，因为，我们性能测试不用图像界面，也不用查看结果树。</p> <p><span style="color: rgba(255, 0, 0, 1)">2.1.6.1 编写sql时这个结尾的分号可以不写，因为，jmeter默认不支持 一个取样器中写多个sql</span></p> <p>　　　　　　2.1.6.2&nbsp;怎么定义变量来接收数据库查询结果：如果想使用特定的参数，则将不使用的参数用一个逗号隔开</p> <p>　　　　　　2.1.6.3<span style="color: rgba(255, 0, 0, 1)">在sql中引用变量：1、直接变量引用 ${变量} ---这种用法，可能存在安全风险不建议使用；2、使用 ？ 来占位，占用一个变量引用的位置：parameter values： 填写 ${变量}；parameter type: 填写 varchar， 如果要传入整数 integer；注意： query type 修改为 prepared select statement　；带有 prepared 开头是在脚本中，可以传入参数；多个变量时，用逗号分割</span></p> <p>　　2.2&nbsp;sqlite数据库</p> <p>　　　　2.2.1&nbsp;是一个关系型数据库，这个数据库，只需要你有图像界面系统，然后有浏览器， 这个数据库在你电脑里已经应用。</p> <p>　　　　2.2.2 使用：下载jar文件 mvn仓库中下载-放入jmeter的lib\ext文件夹, 重启jmeter</p> <p>　　　　2.2.3&nbsp;JDBC Connection Configuration：pool: 自定义；DatabaseURL： jdbc:sqlite:sqlitefile.db；Drvier class: 选择 org.sqlite.JDBC；账号密码： 空</p> <p>　　　　2.2.4&nbsp;这个数据库，不用建库，只需要建表；sqlite 数据库是一个内存数据库，但是，这个数据库，不支持多线程并发</p> 			                <div class="clearfix"></div>
                <div class="col-md-12 mt-5">
                                        <p>上一个：<a href="/news/article-84258.htm">netty依赖精简</a></p>
                                        <p>下一个：<a href="/news/article-84938.htm">抛奇怪硬币在C ++中</a></p>
                                    </div>
                                </div>
                <div class="col-md-3">
                    <div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">热门文章</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2"><a href="/news/article-69265.htm" title="厦门猫咪领养（厦门领养宠物猫中心）">厦门猫咪领养（厦门领养宠物猫中心）</a></li>
                        <li class="py-2"><a href="/news/article-74540.htm" title="同安的宠物店（同安的宠物店哪家好）">同安的宠物店（同安的宠物店哪家好）</a></li>
                        <li class="py-2"><a href="/news/article-68615.htm" title="宠物领养证如何办理的流程（宠物领养程序怎么领养）">宠物领养证如何办理的流程（宠物领养程序怎么领养）</a></li>
                        <li class="py-2"><a href="/news/article-66104.htm" title="郑州哪里批发狗粮猫粮的多（郑州狗粮生产厂家的地址）">郑州哪里批发狗粮猫粮的多（郑州狗粮生产厂家的地址）</a></li>
                        <li class="py-2"><a href="/news/article-67977.htm" title="SpringBoot定时任务Scheduled简易使用及动态多任务使用">SpringBoot定时任务Scheduled简易使用及动态多任务使用</a></li>
                        <li class="py-2"><a href="/news/article-82078.htm" title="成都免费领养狗狗的地方 成都免费领养狗狗的地方在哪里">成都免费领养狗狗的地方 成都免费领养狗狗的地方在哪里</a></li>
                        <li class="py-2"><a href="/news/article-72539.htm" title="有名的毒猫粮（公认的毒猫粮）">有名的毒猫粮（公认的毒猫粮）</a></li>
                        <li class="py-2"><a href="/news/article-71877.htm" title="详解MySQL索引">详解MySQL索引</a></li>
                        <li class="py-2"><a href="/news/article-85671.htm" title="我们如何使用MySQL函数STR_TO_DATE（Column，&#8217;％input_format&#8217;）？">我们如何使用MySQL函数STR_TO_DATE（Column，&#8217;％input_format&#8217;）？</a></li>
                        <li class="py-2"><a href="/free-nodes/2025-3-30-sing-box-node-github.htm" title="「3月30日」最高速度18.5M/S，2025年Singbox每天更新免费机场订阅节点链接">「3月30日」最高速度18.5M/S，2025年Singbox每天更新免费机场订阅节点链接</a></li>
                    </ul>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">归纳</h3>
    </div>
    <div class="panel-body">
        <ul class="p-0 x-0" style="list-style: none;margin: 0;padding: 0;">
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">3</span> <a href="/date/2025-04/" title="2025-04 归档">2025-04</a></h4>
            </li>
                        <li class="py-2">
                <h4><span class="badge" style="float: right;">90</span> <a href="/date/2025-03/" title="2025-03 归档">2025-03</a></h4>
            </li>
                    </ul>
    </div>
</div>

                </div>
            </div>
        </div>
    </div>
        <!-- footer start -->
    <div class="footer">
        <div class="container">
            <div class="row">
                <!-- footer-about-close -->
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 ">
                    <div class="footer-line"></div>
                </div>
                <div class="col-lg-8 col-md-8 col-sm-6 col-xs-12">
                            <p>
                                <a href="/">首页</a> | 
                                <a href="/free-node/">免费节点</a> | 
                                <a href="/news/">新闻资讯</a> |
                                <a href="/about-us.htm">关于我们</a> |
                                <a href="/disclaimer.htm">免责申明</a> |
                                <a href="/privacy.htm">隐私申明</a> |
                                <a href="/sitemap.xml">网站地图</a>
                            </p>
                    <p>
                        <a href="/">Free Singbox节点订阅官网</a> 版权所有 Powered by WordPress
                    </p>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                    <div class="footer-social">
                        <a href="#"><span><i class="fa fa-facebook"></i></span></a>
                        <a href="#"><span><i class="fa fa-google-plus"></i></span> </a>
                        <a href="#"><span class="active"><i class="fa fa-twitter"></i> </span></a>
                        <a href="#"><span><i class="fa fa-instagram"></i></span> </a>
                        <a href="#"><span><i class=" fa fa-pinterest"></i> </span></a>
                        <a href="#"><span><i class="fa fa-linkedin"></i></span></a> </div>
                </div>
            </div>
        </div>
        <!-- footer-address-close -->
    </div>
    <!-- footer close -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/assets/website/js/frontend/freesingbox/jquery-3.5.1.min.js" type="text/javascript"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/assets/website/js/frontend/freesingbox/bootstrap.min.js" type="text/javascript"></script>
    <script src="/assets/website/js/frontend/freesingbox/menumaker.js" type="text/javascript"></script>
    <script type="text/javascript" src="/assets/website/js/frontend/freesingbox/jquery.sticky.js"></script>
    <script type="text/javascript" src="/assets/website/js/frontend/freesingbox/sticky-header.js"></script>
    <script type="text/javascript" src="/assets/website/js/frontend/freesingbox/owl.carousel.min.js"></script>
    <script type="text/javascript" src="/assets/website/js/frontend/freesingbox/slider.js"></script>
    <script src="https://www.freeclashnode.com/assets/js/frontend/invite-url.js"></script><script src="/assets/website/js/frontend/G.js"></script>
</body>

</html>